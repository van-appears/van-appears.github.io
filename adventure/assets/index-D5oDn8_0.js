(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();const Y=[],E=[],x="game.yaml",C="hall",P={hall:{north:"kitchen",east:"landing",south:"office"},kitchen:{south:"hall"},landing:{north:"bedroom",south:"bathroom",west:"hall"},bedroom:{south:"landing"},bathroom:{north:"landing"},office:{north:"hall",east:"library"},library:{west:"office"}},S={"turn on":["press","enable","switch on"],open:["unlock"],break:["smash"],consume:["eat","drink"],light:[],read:[],attack:[],give:[],throw:[]},N="Sample5",q=["You have woken up in a strange location. You don't know how you got here."],D={},K=JSON.parse(`{"bathroom":{"description":["You are in an avocado-green bathroom, very 70s-style.","There is a scented candle beside the bath."],"items":["candle"],"file":"assets/bathroom.yaml","key":"bathroom","name":"bathroom","actions":[],"takeable":true},"bedroom":{"description":["You are in a small bedroom.","There is a small bed and a small bedside table."],"items":["notebook"],"file":"assets/bedroom.yaml","key":"bedroom","name":"bedroom","actions":[],"takeable":true},"bottle":{"description":{"when":{"bottle_smashed":"There is the smashed remains of a large glass bottle","not matches":"Amidst the wreckage is a small box of matches.","else":["It is a large glass bottle. Very large.","One of those champagne bottles with the weird names probably.","There seems to be something at the bottom of it."]}},"actions":[{"verb":"break","when":{"bottle_smashed":{"message":"It's already smashed. Nothing to be gained from making it smasheder.","set":[],"add":[],"remove":[]},"hammer":{"message":["You smash the bottom to smithereens with the hammer.","You keep going until there are only tiny little pieces left.","It was quite satisfying.","Amidst the wreckage is a small box of matches."],"add":["matches"],"set":["bottle_smashed"],"remove":["bottle"]},"else":{"message":"You try breaking the bottle on the ground, but it is quite resilient and remains intact.","set":[],"add":[],"remove":[]}}}],"file":"assets/bottle.yaml","key":"bottle","name":"bottle","items":[],"takeable":true},"candle":{"description":{"when":{"candle_lit":"It is a lit candle giving off a faint but interesting scnet. Careful now!","else":["It is a tall white candle.","There is a label on the side that says it is watermelon and nettle scented. Odd."]}},"actions":[{"verb":"light","when":{"candle_lit":{"message":"It's already lit!","set":[],"add":[],"remove":[]},"matches":{"message":"You light the candle with one of the matches. Careful now!","set":["candle_lit"],"add":[],"remove":[]},"else":{"message":"You don't have anything to light it with.","set":[],"add":[],"remove":[]}}}],"file":"assets/candle.yaml","key":"candle","name":"candle","items":[],"takeable":true},"earthsea":{"description":["It's a copy of the classic 'Earthsea' novel, by Ursula K. Le Guin."],"actions":[{"verb":"read","when":{"small_key":{"message":"You open the book to find it is hollow in the middle, now empty.","set":[],"add":[],"remove":[]},"else":{"message":"You open the book to find it is hollow in the middle, and containing a key.","take":"small_key","set":[],"add":[],"remove":[]}}}],"file":"assets/earthsea.yaml","key":"earthsea","name":"earthsea","items":[],"takeable":true},"front_door_key":{"name":"key","description":["It's a key with a fob with 'front door key' written on it."],"file":"assets/front_door_key.yaml","key":"front_door_key","items":[],"actions":[],"takeable":true},"hall":{"description":{"when":{"":["You are standing in the hall of a house.","The windows are barred, so it looks like the door is the only way out."],"bear_fed":["There is a sleepy, well-fed bear in the corner of the room."],"else":["However, there is a grumpy looking bear in front of the exit."]}},"actions":[{"when":{"eaten_honey":{"message":["The bear smells the honey that you dropped all over youself.","It decides you must be good to eat.","So it eats you."],"gameover":"died","set":[],"add":[],"remove":[]}}},{"verb":"attack","noun":"bear","message":["The bear didn't like that, it is a wild animal after all.","It rips your head off and starts to eat your body."],"gameover":"died","set":[],"add":[],"remove":[]},{"verb":"give","noun":"honey","when":{"honey":{"message":["You open the jar of honey and set it near the bear.","The bear sniffs it, picks it up, moves to the corner of the room, and starts eating.","The door is no longer blocked!"],"set":["bear_fed"],"add":[],"remove":[]},"else":{"message":"You don't have any honey.","set":[],"add":[],"remove":[]}}},{"verb":"give","noun":"hotsauce","when":{"hotsauce":{"message":["You open the bottle of hotsauce and set it near the bear.","The bear sniffs it, picks it up, and tries some of it.","There is a pause.","The bear looks unhappy.","The bear looks angry.","The bear knows you are to blame.","The bear decides you might taste nicer than the hotsauce.","The bear eats you."],"gameover":"died","set":[],"add":[],"remove":[]},"else":{"message":"You don't have any hotsauce.","set":[],"add":[],"remove":[]}}},{"verb":"throw","noun":"hammer","when":{"hammer":{"message":["You throw the hammer with excellent aim.","It makes a lovely 'boink' noise as it bounces off the bear's head.","There is a pause.","The bear looks unhappy.","The bear looks angry.","With excellent aim, the bear's claws rip your chest open.","The are some lovely crunching and squelching noises as the bear eats you."],"gameover":"died","set":[],"add":[],"remove":[]},"else":{"message":"You don't have a hammer.","set":[],"add":[],"remove":[]}}},{"verb":"open","noun":"door","when":{"bear_fed and front_door_key":{"message":"You unlock the door and walk out into the sunshine.","gameover":"success","set":[],"add":[],"remove":[]},"bear_fed and not front_door_key":{"message":"The door is locked! You don't have the right key.","set":[],"add":[],"remove":[]},"else":{"message":"I don't think so, there's a grumpy bear blocking the door.","set":[],"add":[],"remove":[]}}}],"file":"assets/hall.yaml","key":"hall","name":"hall","items":[],"takeable":true},"hammer":{"description":["It is a nice solid hammer."],"file":"assets/hammer.yaml","key":"hammer","name":"hammer","items":[],"actions":[],"takeable":true},"honey":{"description":{"when":{"eaten_honey":"It is an empty jar of local honey.","else":"It is a mostly full jar of local honey."}},"actions":[{"verb":"consume","when":{"eaten_honey":{"message":"You have already eaten the honey. It was delicious.","set":[],"add":[],"remove":[]},"else":{"message":["You start eating the honey.","It is delicious, but you are a terribly messy eater and it gets everywhere, all down your front."],"set":["eaten_honey"],"add":[],"remove":[]}}}],"file":"assets/honey.yaml","key":"honey","name":"honey","items":[],"takeable":true},"hotsauce":{"name":"hot sauce","description":{"when":{"":["It is a small bottle of hotsauce with the label showing a chicken wearing a luchador mask."],"eaten_hotsauce":["It is empty."]}},"actions":[{"verb":"consume","when":{"eaten_hotsauce":{"message":"You have already eaten the hotsauce. You regret it.","set":[],"add":[],"remove":[]},"else":{"message":["You start drinking the whole bottle of hotsauce.","Aarrgh... so hot... so painful... your stomach hurts.","You want to be sick.","This was a bad idea."],"set":["eaten_hotsauce"],"add":[],"remove":[]}}}],"file":"assets/hotsauce.yaml","key":"hotsauce","items":[],"takeable":true},"kitchen":{"description":["You are in a smallish kitchen, it looks quite bare.","There is a fridge, a set of locked cupboards, and some drawers.","There is also a very large glass bottle beside the sink."],"items":["kitchen_cupboard","kitchen_fridge","bottle","kitchen_drawers"],"file":"assets/kitchen.yaml","key":"kitchen","name":"kitchen","actions":[],"takeable":true},"kitchen_cupboard":{"name":"cupboards","takeable":false,"description":{"when":{"":["It is a cupboard. There's not much to say about cupboards."],"not cupboard_opened":["It is also locked, that's probably important to say."]}},"actions":[{"verb":"open","when":{"cupboard_opened":{"message":"You already opened it.","set":[],"add":[],"remove":[]},"front_door_key and not kitchen_cupboard_key":{"message":"That key doesn't seem to open this cupboard.","set":[],"add":[],"remove":[]},"kitchen_cupboard_key and not cupboard_opened":{"message":["You unlock the cupboard with the small key.","There is a bottle of hotsauce and a pot of honey inside."],"set":["cupboard_opened"],"add":["honey","hotsauce"],"remove":[]},"else":{"message":"You can't, the cupboard is locked.","set":[],"add":[],"remove":[]}}}],"file":"assets/kitchen_cupboard.yaml","key":"kitchen_cupboard","items":[]},"kitchen_cupboard_key":{"name":"key","description":["It's a small key."],"file":"assets/kitchen_cupboard_key.yaml","key":"kitchen_cupboard_key","items":[],"actions":[],"takeable":true},"kitchen_drawers":{"name":"drawers","takeable":true,"description":{"when":{"":["It is a set of drawers."],"drawers_opened and not hammer":["The third drawer contains a hammer."]}},"actions":[{"verb":"open","when":{"not drawers_opened and not hammer":{"message":["There are a few drawers, you check them one by one.","The first looks like it should have cutlery in it, but is completely empty.","The second drawer is also empty.","The third drawer contains a hammer."],"set":["drawers_opened"],"add":["hammer"],"remove":[]},"drawers_opened and not hammer":{"message":["You check the drawers again.","The first looks like it should have cutlery in it, but is completely empty.","The second drawer is also empty.","The third drawer contains a hammer.","Try and remember this time."],"set":[],"add":[],"remove":[]},"else":{"message":["You check the drawers again.","The first looks like it should have cutlery in it, but is completely empty.","The second drawer is also empty.","The third drawer is empty.","Empty drawers, all the way down!"],"set":[],"add":[],"remove":[]}}}],"file":"assets/kitchen_drawers.yaml","key":"kitchen_drawers","items":[]},"kitchen_fridge":{"name":"fridge","takeable":true,"description":["It is a fridge. It seems to be working."],"actions":[{"verb":"open","message":"You open the fridge to find... nothing, not even a nubbin of cheese.","set":[],"add":[],"remove":[]}],"file":"assets/kitchen_fridge.yaml","key":"kitchen_fridge","items":[]},"landing":{"description":["You are on the first floor landing.","The carpet is a bit threadbare, but has a nice floral pattern.","There is a photograph on the wall.","There is a window at the far end of the landing, also barred."],"items":["photograph"],"file":"assets/landing.yaml","key":"landing","name":"landing","actions":[],"takeable":true},"library":{"description":["You are in a darkened library.","There is no window and the light does not work.","Every wall is shelved and there appear to be hundreds of dusty books here.","Maybe there is something here if you knew what to look for and could see it."],"actions":[{"verb":"read","noun":"earthsea","when":{"not candle_lit":{"message":"You can't see well enough to read anything.","set":[],"add":[],"remove":[]},"snall_key":{"message":"You open the book to find it is hollow in the middle, now empty.","set":[],"add":[],"remove":[]},"else":{"message":"You open the book to find it is hollow in the middle, and containing a key.","add":["kitchen_cupboard_key"],"set":[],"remove":[]}}}],"file":"assets/library.yaml","key":"library","name":"library","items":[],"takeable":true},"matches":{"description":["It is a small box of matches."],"actions":[{"verb":"light","message":"You light a match. It gives off a feeble glow.","set":[],"add":[],"remove":[]}],"file":"assets/matches.yaml","key":"matches","name":"matches","items":[],"takeable":true},"notebook":{"description":["The notebook is empty, except for an instruction written on the first page.","On the page is written 'Read Earthsea'"],"actions":[{"verb":"read","message":["The notebook is empty, except for an instruction written on the first page.","On the page is written 'Read Earthsea'"],"set":[],"add":[],"remove":[]}],"file":"assets/notebook.yaml","key":"notebook","name":"notebook","items":[],"takeable":true},"office":{"description":["You are in a lovely wood-panelled office. There is a large wooden chest in the corner."],"items":["office_chest"],"file":"assets/office.yaml","key":"office","name":"office","actions":[],"takeable":true},"office_chest":{"name":"chest","description":["It is a heavy wooden chest, made of... let's say oak.","It has a combination lock on the outside, looks like it needs four digits."],"actions":[{"verb":"open","when":{"not chest_opened":{"ask":"What combination?","set":[],"add":[],"remove":[]},"else":{"message":"The chest is already opened.","set":[],"add":[],"remove":[]}}},{"asked":"What combination?","when":{"1011":{"message":"You open the chest to find a key inside.","set":["chest_opened"],"add":["front_door_key"],"remove":[]},"else":{"message":"No, that didn't seem to work.","set":[],"add":[],"remove":[]}}}],"file":"assets/office_chest.yaml","key":"office_chest","items":[],"takeable":true},"photograph":{"name":"photo","takeable":"Better not, it might be load-bearing.","description":["It is a photo of a cute doggy.","At the bottom of the photo it says 'Fluffikins, born 10th November'"],"file":"assets/photograph.yaml","key":"photograph","items":[],"actions":[]}}`),b={errors:Y,warnings:E,file:x,start:C,map:P,synonyms:S,title:N,introduction:q,gameoverMessages:D,assets:K};function R(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var p,T;function A(){if(T)return p;T=1;var s=Object.prototype.toString;p=function(d){if(d===void 0)return"undefined";if(d===null)return"null";var f=typeof d;if(f==="boolean")return"boolean";if(f==="string")return"string";if(f==="number")return"number";if(f==="symbol")return"symbol";if(f==="function")return c(d)?"generatorfunction":"function";if(o(d))return"array";if(h(d))return"buffer";if(a(d))return"arguments";if(t(d))return"date";if(r(d))return"error";if(n(d))return"regexp";switch(e(d)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(u(d))return"generator";switch(f=s.call(d),f){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return f.slice(8,-1).toLowerCase().replace(/\s/g,"")};function e(i){return typeof i.constructor=="function"?i.constructor.name:null}function o(i){return Array.isArray?Array.isArray(i):i instanceof Array}function r(i){return i instanceof Error||typeof i.message=="string"&&i.constructor&&typeof i.constructor.stackTraceLimit=="number"}function t(i){return i instanceof Date?!0:typeof i.toDateString=="function"&&typeof i.getDate=="function"&&typeof i.setDate=="function"}function n(i){return i instanceof RegExp?!0:typeof i.flags=="string"&&typeof i.ignoreCase=="boolean"&&typeof i.multiline=="boolean"&&typeof i.global=="boolean"}function c(i,d){return e(i)==="GeneratorFunction"}function u(i){return typeof i.throw=="function"&&typeof i.return=="function"&&typeof i.next=="function"}function a(i){try{if(typeof i.length=="number"&&typeof i.callee=="function")return!0}catch(d){if(d.message.indexOf("callee")!==-1)return!0}return!1}function h(i){return i.constructor&&typeof i.constructor.isBuffer=="function"?i.constructor.isBuffer(i):!1}return p}/*!
 * shallow-clone <https://github.com/jonschlinkert/shallow-clone>
 *
 * Copyright (c) 2015-present, Jon Schlinkert.
 * Released under the MIT License.
 */var g,_;function M(){if(_)return g;_=1;const s=Symbol.prototype.valueOf,e=A();function o(a,h){switch(e(a)){case"array":return a.slice();case"object":return Object.assign({},a);case"date":return new a.constructor(Number(a));case"map":return new Map(a);case"set":return new Set(a);case"buffer":return c(a);case"symbol":return u(a);case"arraybuffer":return t(a);case"float32array":case"float64array":case"int16array":case"int32array":case"int8array":case"uint16array":case"uint32array":case"uint8clampedarray":case"uint8array":return n(a);case"regexp":return r(a);case"error":return Object.create(a);default:return a}}function r(a){const h=a.flags!==void 0?a.flags:/\w+$/.exec(a)||void 0,i=new a.constructor(a.source,h);return i.lastIndex=a.lastIndex,i}function t(a){const h=new a.constructor(a.byteLength);return new Uint8Array(h).set(new Uint8Array(a)),h}function n(a,h){return new a.constructor(a.buffer,a.byteOffset,a.length)}function c(a){const h=a.length,i=Buffer.allocUnsafe?Buffer.allocUnsafe(h):Buffer.from(h);return a.copy(i),i}function u(a){return s?Object(s.call(a)):{}}return g=o,g}/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var k,I;function W(){return I||(I=1,k=function(e){return e!=null&&typeof e=="object"&&Array.isArray(e)===!1}),k}/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var w,O;function B(){if(O)return w;O=1;var s=W();function e(o){return s(o)===!0&&Object.prototype.toString.call(o)==="[object Object]"}return w=function(r){var t,n;return!(e(r)===!1||(t=r.constructor,typeof t!="function")||(n=t.prototype,e(n)===!1)||n.hasOwnProperty("isPrototypeOf")===!1)},w}var v,L;function U(){if(L)return v;L=1;const s=M(),e=A(),o=B();function r(c,u){switch(e(c)){case"object":return t(c,u);case"array":return n(c,u);default:return s(c)}}function t(c,u){if(typeof u=="function")return u(c);if(u||o(c)){const a=new c.constructor;for(let h in c)a[h]=r(c[h],u);return a}return c}function n(c,u){const a=new c.constructor(c.length);for(let h=0;h<c.length;h++)a[h]=r(c[h],u);return a}return v=r,v}var $=U();const F=R($),G={n:"north",e:"east",w:"west",s:"south",ne:"northeast",nw:"northwest",se:"southeast",sw:"southwest"};function Q(s,e){s=s.trim().toLowerCase();const o=Object.entries(G).find(r=>r[0]===s||r[1]===s);if(o)return{type:"MOVE",direction:o};if(s.startsWith("take "))return{type:"TAKE",noun:s.substring(5).trim()};if(s.startsWith("describe ")||s.startsWith("examine "))return{type:"DESCRIBE",noun:s.substring(9).trim()};if(["look","quit","inventory"].includes(s))return{type:"CONTROL",action:s};for(let[r,t]of Object.entries(e)){if(s.startsWith(r+" "))return{type:"ACTION",verb:r,noun:s.substring(r.length+1).trim()};for(let n of t)if(s.startsWith(n+" "))return{type:"ACTION",verb:r,noun:s.substring(n.length+1).trim()}}return{type:"UNKNOWN"}}const H=["To perform an action use 'verb noun' e.g. 'take item', 'open door'.","To move use a direction e.g. 'north', 'southeast' or short verions e.g. 'n', 'se'.","To see information on a room use 'look'.","To see information on an item use 'describe' or 'examine' e.g. 'describe book'.","To see what you are carrying use command 'inventory'.","To start press Enter."],V={instructions:H},y=s=>s?s.toLowerCase().trim():null;class J{constructor(e){const o=F(e);this.introduction=o.introduction,this.startLocation=o.start,this.map=o.map,this.synonyms=o.synonyms,this.assets=o.assets,this.inventory={},this.state={},this.currentQuestion=null,this.gameover=!1,this.gameoverMessages=o.gameoverMessages,this.instructions=V.instructions}start(){this.currentLocationKey=this.startLocation;const e=[].concat(this.introduction).concat(this.describeCurrentLocation());return this.currentLocation().visited=!0,e}next(e){if(this.currentQuestion)return this.doAsk(e);const o=Q(e,this.synonyms);return o.type==="MOVE"?this.doMove(o.direction):o.type==="CONTROL"?this.doControlAction(o.action):o.type==="DESCRIBE"?this.doDescribeItem(o.noun):o.type==="TAKE"?this.doTakeItem(o.noun):o.type==="ACTION"?this.doPerformAction(o):["I don't understand that."]}currentLocation(){return this.assets[this.currentLocationKey]}describeCurrentLocation(){return[].concat(this.describeLocation()).concat(this.describeItems()).concat(this.describeExits())}doAsk(e){const{text:o,parent:r}=this.currentQuestion,t=r.actions.find(n=>y(n.asked)===y(o));return this.currentQuestion=null,t?this.processActions(t,r,e):[]}doControlAction(e){if(e==="quit")return this.gameoverStatus=null,this.gameover=!0,["Goodbye!"];if(e==="look")return this.describeCurrentLocation();if(e==="inventory")return this.listInventory()}doMove(e){const o=this.map[this.currentLocationKey][e[0]]||this.map[this.currentLocationKey][e[1]];let r;if(o){this.currentLocationKey=o;const t=this.currentLocation();t.visited?r=["You are in: "+t.key]:(t.visited=!0,r=this.describeCurrentLocation());const n=t.actions.find(c=>!c.verb);return n&&(r=r.concat(this.processActions(n,t))),r}return["There is no exit in that direction."]}doDescribeItem(e){const o=this.currentLocation(),r=this.findLocationItem(o,e);if(r){const{description:t}=r;return typeof t=="object"&&t.when?this.getPassingObjects(t.when):t}return["There isn't one of those here."]}doTakeItem(e){const o=this.currentLocation(),r=this.findLocationItem(o,e);if(r)return r.takeable?(this.inventory[r.key]=!0,o.items=o.items.filter(n=>n!==r.key),["You have taken: "+r.name]):typeof r.takeable=="string"?[r.takeable]:["You can't take that item."];const t=this.findInventoryItem(e);return t?["You already have: "+t.name]:["There isn't one of those here."]}doPerformAction(e){const o=this.currentLocation(),r=o.actions.find(n=>n.verb===e.verb&&n.noun===e.noun);if(r)return this.processActions(r,o);const t=this.findLocationItem(o,e.noun)||this.findInventoryItem(e.noun);if(t){const n=t.actions.find(c=>c.verb===e.verb);if(n)return this.processActions(n,t)}return["I don't understand that."]}findLocationItem(e,o){return e.items.map(r=>this.assets[r]).find(r=>r.key===o||r.name===o)}findInventoryItem(e){return Object.keys(this.inventory).map(o=>this.assets[o]).find(o=>o.key===e||o.name===e)}processActions(e,o,r){const t=this.currentLocation();return(e.when?this.getPassingObjects(e.when,r):[].concat(e)).map(c=>(c.set.forEach(u=>{this.state[u]=!0}),c.add.forEach(u=>{t.items.push(u)}),c.remove.forEach(u=>{t.items=t.items.filter(a=>a!==u),delete this.inventory[u]}),c.ask&&(this.currentQuestion={text:c.ask,parent:o}),c.gameover&&(this.gameoverStatus=c.gameover,this.gameover=!0),c.message)).filter(c=>c).flat()}getPassingObjects(e,o){const r=Object.keys(e).filter(t=>t).map(t=>(o?y(t)===y(o):this.isPassingChecks(t))?t:null).filter(t=>t);return r.length==0&&e.else&&r.push("else"),e[""]&&r.unshift(""),r.map(t=>e[t]).filter(t=>t).flat()}isPassingChecks(e){return e.split(" and ").every(r=>{if(r.startsWith("not ")){const t=r.substring(4);return!(this.inventory[t]||this.state[t]||t===this.currentLocationKey)}return this.inventory[r]||this.state[r]||r===this.currentLocationKey})}describeLocation(){const{description:e}=this.assets[this.currentLocationKey];return Array.isArray(e)?e:typeof e=="object"&&e.when?this.getPassingObjects(e.when):["You are in: "+this.currentLocationKey]}describeExits(){const e=[],o=[];return Object.entries(this.map[this.currentLocationKey]||{}).forEach(([r,t])=>{const n=this.assets[t];n.visited?e.push(`To the ${r} is: ${n.key}`):o.push(r)}),o.length?e.concat(`There are exits to the: ${o.join(", ")}`):e}describeItems(){const{items:e}=this.assets[this.currentLocationKey];return e.length?["Here there is: "+e.map(o=>this.assets[o].name).join(", ")]:[]}listInventory(){return Object.keys(this.inventory).length?["You are carrying: "+Object.keys(this.inventory).map(e=>this.assets[e].name).join(", ")]:["You are not carrying anything"]}}const l=s=>document.querySelector(s);function m(s,e){const o=document.createElement("div"),r=document.createElement("span");r.innerText=s,o.className=e,o.append(r),l(".history").insertBefore(o,l(".spacer"))}function j(s){s.value="",s.focus()}b.errors.length,b.errors.length?(l("body").className="started errors",l(".information").append("Please correct your game definition and try again.")):l("body").className="started";l(".wrapper").style="";if(!b.errors.length){const s=l("#command"),e=l(".history");let o=!1;const r=new J(b);(r.instructions||[]).forEach(t=>m(t,"instructions")),s.addEventListener("keyup",t=>{if(t.key==="Enter"||t.keyCode===13)if(!o)r.start().forEach(n=>m(n,"textOutput")),o=!0;else{const n=(t.target.value||"").trim();if(n){const c=r.next(n);m(n,"textInput"),(c||[]).forEach(u=>m(u,"textOutput")),r.currentQuestion&&m(r.currentQuestion.text,"questionOutput"),e.scrollTo(0,e.scrollHeight),j(s),r.gameover&&(l("body").className="finished")}}}),setTimeout(()=>{j(s)},0)}
